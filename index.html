<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Chat API Test - Now AI</title>
    <meta name="description"
        content="Test interface for the Custom Chat API with support for multiple AI models and chat history">
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ü§ñ</text></svg>">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1.1em;
        }

        .content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0;
        }

        .form-section {
            padding: 40px;
            border-right: 1px solid #e0e0e0;
        }

        .response-section {
            padding: 40px;
            background: #f8f9fa;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
            font-size: 14px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            border-color: #667eea;
            outline: none;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }

        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .response-container {
            background: white;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 20px;
            border: 1px solid #e0e0e0;
        }

        .response-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #e0e0e0;
        }

        .status-badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-success {
            background: #d4edda;
            color: #155724;
        }

        .status-error {
            background: #f8d7da;
            color: #721c24;
        }

        .model-used {
            font-size: 12px;
            color: #666;
            background: #f0f0f0;
            padding: 4px 8px;
            border-radius: 4px;
        }

        .response-content {
            line-height: 1.6;
            color: #333;
            white-space: pre-wrap;
            font-family: 'Courier New', monospace;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid #667eea;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .help-text {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }

        .example-prompts {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .example-prompts h4 {
            margin-bottom: 10px;
            color: #333;
        }

        .example-prompt {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            padding: 10px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .example-prompt:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .example-prompt .title {
            font-weight: 600;
            color: #333;
            margin-bottom: 4px;
        }

        .example-prompt .prompt {
            font-size: 12px;
            color: #666;
        }

        .cors-warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            color: #856404;
        }

        .cors-warning h4 {
            margin-bottom: 8px;
            color: #856404;
        }

        .cors-warning ul {
            margin-left: 20px;
            line-height: 1.5;
        }

        .cors-warning code {
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            color: #333;
        }

        .github-link {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 10px 15px;
            border-radius: 20px;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .github-link:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        @media (max-width: 768px) {
            .content {
                grid-template-columns: 1fr;
            }

            .form-section {
                border-right: none;
                border-bottom: 1px solid #e0e0e0;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .github-link {
                position: static;
                margin-bottom: 20px;
                display: inline-block;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <a href="https://github.com/your-username/now-ai-clean" class="github-link">üìö View on GitHub</a>
            <h1>ü§ñ Custom Chat API Test</h1>
            <p>Test interface for the Now AI Custom Chat API with multiple models and chat history support</p>
        </div>

        <div class="content">
            <div class="form-section">
                <div class="cors-warning">
                    <h4>‚ÑπÔ∏è API Information</h4>
                    <ul>
                        <li>This interface connects to the Now AI QA environment</li>
                        <li>Endpoint: <code>qa-wsup.testngg.net</code></li>
                        <li>All requests are sent to the fixed API endpoint</li>
                    </ul>
                </div>

                <form id="chatForm">
                    <div class="example-prompts">
                        <h4>üí° Example Prompts</h4>
                        <div class="example-prompt" onclick="loadExample('creative')">
                            <div class="title">Creative Writing Assistant</div>
                            <div class="prompt">System: You are a creative writing assistant...</div>
                        </div>
                        <div class="example-prompt" onclick="loadExample('technical')">
                            <div class="title">Technical Explainer</div>
                            <div class="prompt">System: You are a technical expert who explains complex concepts...
                            </div>
                        </div>
                        <div class="example-prompt" onclick="loadExample('casual')">
                            <div class="title">Casual Conversation</div>
                            <div class="prompt">System: You are a friendly, casual conversationalist...</div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="apiEndpoint">üîó API Endpoint</label>
                        <input type="text" id="apiEndpoint"
                            value="https://qa-wsup.testngg.net/ai/api/char/v1/customChat" placeholder="API endpoint URL"
                            readonly style="background-color: #f5f5f5; cursor: not-allowed;">
                        <div class="help-text">Fixed endpoint for the Now AI Custom Chat API</div>
                    </div>

                    <div class="form-group">
                        <label for="authToken">üîë Authorization Token (Optional)</label>
                        <input type="text" id="authToken" placeholder="Bearer token for authentication">
                        <div class="help-text">Leave empty if authentication is not required</div>
                    </div>

                    <div class="form-group">
                        <label for="systemPrompt">üéØ System Prompt</label>
                        <textarea id="systemPrompt" placeholder="Enter your system prompt here..." rows="4"></textarea>
                        <div class="help-text">This defines the AI's role and behavior</div>
                    </div>

                    <div class="form-group">
                        <label for="userPrompt">üí¨ User Prompt</label>
                        <textarea id="userPrompt" placeholder="Enter your user message here..." rows="3"></textarea>
                        <div class="help-text">This is the user's message or question</div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="modelName">üß† Model</label>
                            <select id="modelName">
                                <option value="llama3_1_8BCustom">Llama 3.1 8B Custom</option>
                                <option value="llama3_1_8BCustomHighTemp">Llama 3.1 8B High Temp</option>
                                <option value="deepSeek_R1">DeepSeek R1</option>
                                <option value="deepSeek_V3">DeepSeek V3</option>
                                <option value="googleGeminiFlash">Google Gemini Flash</option>
                                <option value="googleGeminiPro">Google Gemini Pro</option>
                                <option value="nebiusNormalGemma">Nebius Gemma</option>
                                <option value="openrouterGemma3">OpenRouter Gemma 3</option>
                                <option value="openrouterGemma3Json">OpenRouter Gemma 3 JSON</option>
                                <option value="openrouterMistralSmall32">OpenRouter Mistral Small</option>
                                <option value="openrouterMistralSmall32Json">OpenRouter Mistral Small JSON</option>
                                <option value="qwen3_32b_openRouter">Qwen 3 32B OpenRouter</option>
                                <option value="qwen3_32b_openRouterJson">Qwen 3 32B OpenRouter JSON</option>
                                <option value="qwen3_32b_groq">Qwen 3 32B Groq</option>
                                <option value="qwen3_32b_groqJson">Qwen 3 32B Groq JSON</option>
                                <option value="groqCompoundBeta">Groq Compound Beta</option>
                                <option value="groqCompoundBetaJson">Groq Compound Beta JSON</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="chatSessionId">üó®Ô∏è Chat Session ID (Optional)</label>
                            <input type="text" id="chatSessionId" placeholder="cb-abc123def456ghi789">
                            <div class="help-text">Include chat history from this session</div>
                        </div>
                    </div>

                    <button type="submit" class="btn" id="submitBtn">
                        üöÄ Send Request
                    </button>
                </form>
            </div>

            <div class="response-section">
                <h3 style="margin-bottom: 20px; color: #333;">üìã Response</h3>

                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p>Sending request...</p>
                </div>

                <div id="responseContainer"></div>

                <div class="example-prompts">
                    <h4>üìù Tips</h4>
                    <div style="font-size: 14px; color: #666; line-height: 1.5;">
                        ‚Ä¢ <strong>System Prompt:</strong> Defines the AI's personality and role<br>
                        ‚Ä¢ <strong>JSON Models:</strong> Use for structured responses<br>
                        ‚Ä¢ <strong>Chat Session ID:</strong> Must follow format: cb-[21 alphanumeric chars]<br>
                        ‚Ä¢ <strong>High Temp Models:</strong> More creative, less predictable responses<br>
                        ‚Ä¢ <strong>Fixed Endpoint:</strong> All requests go to the QA environment
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const examples = {
            creative: {
                systemPrompt: `You are a creative writing assistant who helps users craft compelling stories. You have expertise in various genres including fantasy, sci-fi, romance, and mystery. Your responses should be imaginative, detailed, and inspiring. Always encourage creativity while providing practical writing advice.`,
                userPrompt: `Help me create a character for a fantasy novel. I want someone who is both powerful and vulnerable, with an interesting backstory.`
            },
            technical: {
                systemPrompt: `You are a technical expert who excels at explaining complex concepts in simple, understandable terms. You break down difficult topics into digestible pieces, use analogies when helpful, and always ensure your explanations are accurate and practical. You encourage questions and deeper learning.`,
                userPrompt: `Explain how machine learning works in simple terms, and give me an example of how it's used in everyday life.`
            },
            casual: {
                systemPrompt: `You are a friendly, casual conversationalist who loves to chat about anything and everything. You're warm, empathetic, and always interested in what the user has to say. You respond naturally and keep conversations flowing smoothly while being genuinely helpful.`,
                userPrompt: `I'm feeling a bit stressed about work lately. What are some good ways to relax and unwind after a long day?`
            }
        };

        function loadExample(type) {
            const example = examples[type];
            document.getElementById('systemPrompt').value = example.systemPrompt;
            document.getElementById('userPrompt').value = example.userPrompt;
        }

        document.getElementById('chatForm').addEventListener('submit', async function (e) {
            e.preventDefault();

            const submitBtn = document.getElementById('submitBtn');
            const loading = document.getElementById('loading');
            const responseContainer = document.getElementById('responseContainer');

            // Get form values
            const apiEndpoint = document.getElementById('apiEndpoint').value;
            const authToken = document.getElementById('authToken').value;
            const systemPrompt = document.getElementById('systemPrompt').value;
            const userPrompt = document.getElementById('userPrompt').value;
            const modelName = document.getElementById('modelName').value;
            const chatSessionId = document.getElementById('chatSessionId').value;

            // Validate required fields
            if (!systemPrompt || !userPrompt) {
                alert('Please fill in both system prompt and user prompt');
                return;
            }

            // Show loading state
            submitBtn.disabled = true;
            loading.style.display = 'block';
            responseContainer.innerHTML = '';

            try {
                // Prepare request body
                const requestBody = {
                    systemPrompt,
                    userPrompt,
                    modelName
                };

                // Add chatSessionId if provided
                if (chatSessionId.trim()) {
                    requestBody.chatSessionId = chatSessionId.trim();
                }

                // Prepare headers
                const headers = {
                    'Content-Type': 'application/json'
                };

                // Add authorization header if token provided
                if (authToken.trim()) {
                    headers['Authorization'] = `${authToken.trim()}`;
                }

                // Make API request
                const response = await fetch(apiEndpoint, {
                    method: 'POST',
                    headers,
                    body: JSON.stringify(requestBody)
                });

                const result = await response.json();

                // Display response
                displayResponse(result, response.status);

            } catch (error) {
                displayError(error.message);
            } finally {
                // Hide loading state
                submitBtn.disabled = false;
                loading.style.display = 'none';
            }
        });

        function displayResponse(result, statusCode) {
            const responseContainer = document.getElementById('responseContainer');

            const isSuccess = result.status === 'Success' && statusCode === 200;

            responseContainer.innerHTML = `
                <div class="response-container">
                    <div class="response-header">
                        <span class="status-badge ${isSuccess ? 'status-success' : 'status-error'}">
                            ${isSuccess ? '‚úÖ Success' : '‚ùå Error'}
                        </span>
                        ${result.body?.modelUsed ? `<span class="model-used">Model: ${result.body.modelUsed}</span>` : ''}
                    </div>
                    <div class="response-content">${isSuccess ? result.body.response : (result.body?.message || 'Unknown error occurred')}</div>
                </div>
                
                <div class="response-container">
                    <div class="response-header">
                        <span style="font-weight: 600;">üìä Raw Response</span>
                        <span style="font-size: 12px; color: #666;">HTTP ${statusCode}</span>
                    </div>
                    <div class="response-content">${JSON.stringify(result, null, 2)}</div>
                </div>
            `;
        }

        function displayError(message) {
            const responseContainer = document.getElementById('responseContainer');

            responseContainer.innerHTML = `
                <div class="response-container">
                    <div class="response-header">
                        <span class="status-badge status-error">‚ùå Network Error</span>
                    </div>
                    <div class="response-content">${message}</div>
                </div>
            `;
        }

        // Load default example on page load
        window.addEventListener('load', function () {
            loadExample('creative');
        });
    </script>
</body>

</html>
